# ТЗ: Интеграция модуля «Классы — Разделы — Уроки — Игры» в существующий Flutter-проект

## Структура навигации

1. **Классы** → список классов с прогрессом.
2. **Разделы** → при выборе класса показываем разделы с прогрессом.
3. **Уроки** → при выборе раздела список уроков с прогрессом.
4. **Игры и Мастерство**:

   * Каждый урок содержит 2–4 мини-игры.
   * В конце урока доступна итоговая игра «Мастерство» по материалу этого урока.
   * В конце раздела итоговой игры «Мастерство» нет.

## Типы игр

1. Открытый ответ (текстовое поле + проверка)
2. Проверка знаний (true/false или множественный выбор)
3. Сделай снимок (камера, сохранение фото)
4. Группировка (drag & drop)
5. Викторина (таймер, тест)
6. Расстановка по порядку (drag & drop)

## Прогресс

* Уровни прогресса: `игра → урок → раздел → класс`.
* Прогресс урока = среднее значение прогресса всех игр + прогресс игры «Мастерство» (если пройдена).
* Прогресс раздела = среднее по урокам.
* Прогресс класса = среднее по разделам.

## Модели данных (Dart)

```dart
class ClassItem {
  final String id;
  final String title;
  final double progress; // 0..100
  final List<SectionItem> sections;
}

class SectionItem {
  final String id;
  final String title;
  final double progress;
  final List<LessonItem> lessons;
}

class LessonItem {
  final String id;
  final String title;
  final double progress;
  final List<GameMeta> games;
  final GameMeta masteryGame; // Мастерство для урока
}

class GameMeta {
  final String id;
  final GameType type;
  final double score;
  final Map<String, dynamic> config;
}

enum GameType {
  openAnswer, knowledgeCheck, photo, grouping, quiz, ordering, mastery
}
```

## Точки интеграции

1. **UI** — добавить экраны/роуты для разделов, уроков, игр и отдельный экран для «Мастерства» в конце каждого урока.
2. **State management** — использовать текущий стейт или подключить Riverpod/Provider для хранения прогресса.
3. **Local storage** — сохранить прогресс (Hive/SQLite, в зависимости от текущей архитектуры).
4. **API** (если есть бэкенд):

   * `GET /classes` → список классов и прогресс.
   * `GET /sections/{id}` → разделы.
   * `GET /lessons/{id}` → уроки и игры.
   * `POST /games/{id}/submit` → результат игры или мастерства.

## Минимальный план интеграции

1. Добавить модели и парсеры для классов/разделов/уроков.
2. Реализовать экраны для навигации и прогресса.
3. Интегрировать хотя бы одну мини-игру + «Мастерство» для теста флоу.
4. Подключить сохранение и загрузку прогресса.
5. Добавить оставшиеся игры и интеграцию мастерства в каждый урок.
